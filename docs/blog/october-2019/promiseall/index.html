<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.59.0"><meta name=description content><link rel=icon href=/blog/images/favicon.ico type=image/ico><title>Promise All :: Jian Liew</title><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-55422968-1','auto');ga('send','pageview');}</script><link href=/blog/css/nucleus.css?1572102458 rel=stylesheet><link href=/blog/css/fontawesome-all.min.css?1572102458 rel=stylesheet><link href=/blog/css/hybrid.css?1572102458 rel=stylesheet><link href=/blog/css/featherlight.min.css?1572102458 rel=stylesheet><link href=/blog/css/perfect-scrollbar.min.css?1572102458 rel=stylesheet><link href=/blog/css/auto-complete.css?1572102458 rel=stylesheet><link href=/blog/css/atom-one-dark-reasonable.css?1572102458 rel=stylesheet><link href=/blog/css/theme.css?1572102458 rel=stylesheet><link href=/blog/css/hugo-theme.css?1572102458 rel=stylesheet><link href=/blog/css/theme-blue.css?1572102458 rel=stylesheet><script src=/blog/js/jquery-3.3.1.min.js?1572102458></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/blog/blog/october-2019/promiseall/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=https://jianliew.me/blog>Jian</a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/blog/js/lunr.min.js?1572102458></script><script type=text/javascript src=/blog/js/auto-complete.js?1572102458></script><script type=text/javascript>var baseurl="https:\/\/jianliew.me\/blog";</script><script type=text/javascript src=/blog/js/search.js?1572102458></script></div><div class=highlightable><ul class=topics><li data-nav-id=/blog/blog/ title=Blog class="dd-item
parent"><a href=/blog/blog/><b></b>Blog</a><ul><li data-nav-id=/blog/blog/october-2019/ title="October 2019" class="dd-item
parent"><a href=/blog/blog/october-2019/><b></b>October 2019</a><ul><li data-nav-id=/blog/blog/october-2019/percentage/ title="Reddit Chart" class=dd-item><a href=/blog/blog/october-2019/percentage/><b>9th. </b>Reddit Chart</a></li><li data-nav-id=/blog/blog/october-2019/programmming/ title="Reddit Word Cloud" class=dd-item><a href=/blog/blog/october-2019/programmming/><b>12th. </b>Reddit Word Cloud</a></li><li data-nav-id=/blog/blog/october-2019/hk/ title="Sentiment Analysis" class=dd-item><a href=/blog/blog/october-2019/hk/><b>13th. </b>Sentiment Analysis</a></li><li data-nav-id=/blog/blog/october-2019/topstories/ title="Hacker News Word Cloud" class=dd-item><a href=/blog/blog/october-2019/topstories/><b>14th. </b>Hacker News Word Cloud</a></li><li data-nav-id=/blog/blog/october-2019/ga/ title="Genetic Algorithm" class=dd-item><a href=/blog/blog/october-2019/ga/><b>19th. </b>Genetic Algorithm</a></li><li data-nav-id=/blog/blog/october-2019/tsp/ title="TSP using GA" class=dd-item><a href=/blog/blog/october-2019/tsp/><b>23th. </b>TSP using GA</a></li><li data-nav-id=/blog/blog/october-2019/promiseall/ title="Promise All" class="dd-item active"><a href=/blog/blog/october-2019/promiseall/><b>25th. </b>Promise All</a></li></ul></li></ul></li><li data-nav-id=/blog/thepragmatic/ title="Pragmatic Programmer" class=dd-item><a href=/blog/thepragmatic/><b></b>Pragmatic Programmer</a><ul><li data-nav-id=/blog/thepragmatic/rubberduck/ title="Rubber Duck" class=dd-item><a href=/blog/thepragmatic/rubberduck/><b>1. </b>Rubber Duck</a></li></ul></li><li data-nav-id=/blog/teaching/ title=Teaching class=dd-item><a href=/blog/teaching/><b></b>Teaching</a><ul><li data-nav-id=/blog/teaching/ubuntu/ title=Ubuntu class=dd-item><a href=/blog/teaching/ubuntu/><b></b>Ubuntu</a><ul><li data-nav-id=/blog/teaching/ubuntu/ls/ title="The File System" class=dd-item><a href=/blog/teaching/ubuntu/ls/><b>1. </b>The File System</a></li></ul></li><li data-nav-id=/blog/teaching/uml/ title=UML class=dd-item><a href=/blog/teaching/uml/><b></b>UML</a><ul><li data-nav-id=/blog/teaching/uml/introduction/ title="What are State Machine Diagrams?" class=dd-item><a href=/blog/teaching/uml/introduction/><b>1. </b>What are State Machine Diagrams?</a></li></ul></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://jianliew.me/blog/cv><i class="far fa-file fa-fw"></i>Curriculum Vitae</a></li><li><a class=padding href=https://jianliew.me/blog/timeline><i class="fas fa-history fa-fw"></i>Time Line</a></li><li><a class=padding href=https://jianliew.me/blog/tags><i class="fas fa-tags fa-fw"></i>Tags</a></li><li><a class=padding href=https://jianliew.me/blog/disclaimer><i class="fas fa-exclamation-triangle fa-fw"></i>Disclaimer</a></li><li><a class=padding href=https://github.com/JianLoong><i class="fab fa-github fa-fw"></i>GitHub Repo</a></li><li><a class=padding href=https://au.linkedin.com/in/jian-loong-liew-0433ab39><i class="fab fa-linkedin-in fa-fw"></i>Linkedin</a></li><li><a class=padding href=mailto:jianloongliew@gmail.com><i class="fas fa-envelope-square fa-fw"></i>Email</a></li></ul></section><section id=footer><p>Built with <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/blog/>Contents</a> > <a href=/blog/blog/>Blog</a> > <a href=/blog/blog/october-2019/>October 2019</a> > Promise All</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><ul><li><ul><li><a href=#lessons-from-this-blog-post>Lessons from this blog post.</a></li></ul></li><li><a href=#references>References</a></li></ul></li></ul></li></ul></nav></div></div></div></div><div id=head-tags><div class=tags><a class=tag-link href=/blog/tags/javascript>JavaScript</a>
<a class=tag-link href=/blog/tags/promise>Promise</a>
<a class=tag-link href=/blog/tags/api>API</a></div></div><div id=body-inner><h1>Promise All</h1><p>Posted on: <strong>Friday, October 25, 2019</strong></p><p>Reading time: <strong>1 minutes and
14 seconds.</strong></p><hr><div class="notices note"><p>This post is a an entry to describe a use case when the Promise.all JavaScript method is needed. The official reference can be found <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all>here</a>. This assumes that the reader has a basic understanding of how promises work.</p></div><p>Before we start, there is a need to understand how certain RESTful services are structured. For example, the Hacker News API has the end point called <strong>topstories</strong>. This end point however, does not contain any other information besides a list of item IDs. So, if you would like to obtain the top 10 post including their <strong>title</strong>, there would be a need to do several GET request to fetch them all.</p><p>The code example below would demonstrate a situation where the <strong>Promise.all</strong> becomes useful.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>getTopStoriesId</span> <span style=color:#f92672>=</span> () =&gt; {
  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>endPoint</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://hacker-news.firebaseio.com/v0/topstories.json&#34;</span>;
  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>endPoint</span>, {
    <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;cors&#34;</span>
  }).<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>response</span>) =&gt; <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>());
};

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>getItem</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>itemNumber</span>) =&gt; {
  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>endPoint</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;//hacker-news.firebaseio.com/v0/item/&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>itemNumber</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.json&#34;</span>;
  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>endPoint</span>, {
    <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;cors&#34;</span>
  }).<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>response</span>) =&gt; <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>());
}

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>topStories</span> <span style=color:#f92672>=</span> () =&gt; <span style=color:#a6e22e>getTopStoriesId</span>().<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>result</span>) =&gt; {
    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>promiseArray</span> <span style=color:#f92672>=</span> [];
    <span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>forEach</span>((<span style=color:#a6e22e>element</span>) =&gt; {
      <span style=color:#a6e22e>promiseArray</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>getItem</span>(<span style=color:#a6e22e>element</span>));
    })

    <span style=color:#66d9ef>return</span> Promise.<span style=color:#a6e22e>all</span>(<span style=color:#a6e22e>promiseArray</span>);
});
</code></pre></div><h4 id=lessons-from-this-blog-post>Lessons from this blog post.</h4><ul><li>Fetch is <strong>significantly easier</strong> to use in comparison to its jQuery counterparts. However, considerations needs to be taken into account when using it in static sites that does not have Babel or modernizr.</li><li>There are a lot of reasons a lot of users decided to create their own wrappers around the Hacker News API. Perhaps, it is deemed that their top stories and end up which does summary could be done in a different way. But HN itself is a very opinionated community.</li></ul><h3 id=references>References</h3><ol><li><a href=https://stackoverflow.com/questions/38180080/when-to-use-promise-all>https://stackoverflow.com/questions/38180080/when-to-use-promise-all</a></li></ol><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/blog/blog/october-2019/tsp/ title="TSP using GA"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/blog/thepragmatic/ title="Pragmatic Programmer" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/blog/js/clipboard.min.js?1572102458></script><script src=/blog/js/perfect-scrollbar.min.js?1572102458></script><script src=/blog/js/perfect-scrollbar.jquery.min.js?1572102458></script><script src=/blog/js/jquery.sticky.js?1572102458></script><script src=/blog/js/featherlight.min.js?1572102458></script><script src=/blog/js/highlight.pack.js?1572102458></script><script>hljs.initHighlightingOnLoad();</script><script src=/blog/js/modernizr.custom-3.6.0.js?1572102458></script><script src=/blog/js/learn.js?1572102458></script><script src=/blog/js/hugo-learn.js?1572102458></script><link href=/blog/mermaid/mermaid.css?1572102458 rel=stylesheet><script src=/blog/mermaid/mermaid.js?1572102458></script><script>mermaid.initialize({startOnLoad:true,flowchart:{curve:'basis'}});</script></body></html>